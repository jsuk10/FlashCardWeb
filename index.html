<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>플래시카드</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="header">
    <h1>플래시카드</h1>
    <p class="sub">앞면=질문, 뒷면=정답 · <strong>Space</strong> 뒤집기 · <strong>←/→</strong> 이전/다음 · <strong>1</strong> 정답 · <strong>0</strong> 오답</p>
  </header>

  <section class="toolbar">
    <div class="search">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden="true">
        <path d="M21 21l-3.8-3.8" stroke="#8aa0c9" stroke-width="2" stroke-linecap="round"/>
        <circle cx="11" cy="11" r="7" stroke="#8aa0c9" stroke-width="2" fill="none"/>
      </svg>
      <input id="q" type="text" placeholder="검색 (키워드로 카드 필터)" aria-label="검색" />
      <button id="clear" class="ghost" type="button">지우기</button>
    </div>

    <label for="topicSelect" class="sr-only" style="position:absolute;left:-9999px;">주제 선택</label>
    <select id="topicSelect" title="주제 선택" class="themed-select">
      <option value="all">전체</option>
      <option value="all_random">전체(랜덤)</option>
    </select>

    <button id="toggleMode" title="학습/퀴즈 모드 전환" type="button">퀴즈 모드</button>
    <button id="toggleShuffle" class="accent" title="순서 섞기" type="button">섞기</button>
  </section>

  <!-- Json 로더 -->
  <section class="container" style="margin-top:0;">
    <div class="card">
      <div class="q">공개 JSON URL에서 카드 불러오기</div>
      <div class="a">
        <div style="display:flex; gap:8px; flex-wrap:wrap; align-items:center; margin:8px 0 6px;">
          <input id="urlInput" type="text" class="themed-input" placeholder="예: https://storage.googleapis.com/<bucket>/cards.json 또는 드라이브 공유 URL/ID" style="flex:1; min-width:360px;" />
          <button id="urlLoad" type="button" class="accent">URL 불러오기</button>
        </div>
        <div id="urlStatus" class="muted" style="margin:0 0 12px;">상태: 대기</div>
        <div class="q">로컬 파일에서 불러오기</div>
            <input id="fileInput" type="file" accept=".json,application/json" style="display:none">
            <button id="fileLoad" type="button" class="accent">파일 불러오기</button>
            <span id="fileName" class="muted" style="margin-left:8px;"></span>
          </div>
    </div>
  </section>

  <main class="container">
    <article class="card" id="card" aria-live="polite">
      <div class="q" id="question"></div>
      <div class="a hidden" id="answer"></div>
      <div class="controls">
        <button id="prev" type="button">← 이전</button>
        <button id="reveal" class="accent" type="button">정답 보기 (Space)</button>
        <button id="next" type="button">다음 →</button>
        <button id="markGood" class="accent" title="맞음(1)" type="button">맞음 ✓</button>
        <button id="markBad" class="danger" title="틀림(0)" type="button">틀림 ✗</button>
      </div>
    </article>

    <section class="progress" style="margin-top:12px;">
      <div><span id="idx">1</span>/<span id="tot">0</span> · 정답 <strong id="ok">0</strong> · 오답 <strong id="ng">0</strong> · 정확도 <strong id="acc">0%</strong></div>
      <div class="bar" style="width: 40%; min-width: 220px"><i id="bar" style="--w:0%"></i></div>
    </section>

    <section class="grid">
      <div>모드: <span id="modeLabel">학습</span> · 순서: <span id="orderLabel">순차</span> · 주제: <span id="topicLabel">전체</span> · 필터: <span id="filterLabel">없음</span></div>
      <div>단축키: <span class="kbd">Space</span> 뒤집기, <span class="kbd">←</span>/<span class="kbd">→</span> 이동, <span class="kbd">1</span> 맞음, <span class="kbd">0</span> 틀림, <span class="kbd">F</span> 검색 포커스</div>
    </section>

    <section id="indexSection" class="container" style="margin-top:20px;">
      <div class="card">
        <div class="q">문제 인덱스</div>
        <div class="a" id="indexBody">
          <div class="muted">로딩 후 JSON의 주제와 질문 목록이 여기 표시됩니다.</div>
        </div>
      </div>
    </section>
    <div class="footer">© 플래시카드 · 진행 상황은 브라우저 로컬에만 저장됩니다.</div>
  </main>

  <script src="app.js"></script>
</body>
</html>
